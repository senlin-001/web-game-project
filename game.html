<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>打地鼠游戏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #8BC34A;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #4CAF50;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }
        h1 {
            color: white;
            margin-top: 0;
        }
        .score-board {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            color: white;
            font-size: 1.2em;
        }
        .holes-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .hole {
            width: 100%;
            aspect-ratio: 1;
            position: relative;
            overflow: hidden;
            border-radius: 50%;
            background-color: #5D4037;
        }
        .mole {
            width: 80%;
            height: 80%;
            position: absolute;
            left: 10%;
            bottom: -100%;
            transition: bottom 0.3s;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23795548"/><circle cx="35" cy="40" r="5" fill="%23000"/><circle cx="65" cy="40" r="5" fill="%23000"/><path d="M40 65 Q50 75 60 65" stroke="%23000" stroke-width="3" fill="none"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }
        .mole.up {
            bottom: 10%;
        }
        .start-btn {
            padding: 12px 25px;
            font-size: 1.1em;
            background-color: #FFC107;
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .start-btn:hover {
            background-color: #FFB300;
        }
        .time-up {
            color: #FF5252;
            font-weight: bold;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>打地鼠游戏</h1>
        <div class="score-board">
            <div>分数: <span id="score">0</span></div>
            <div>时间: <span id="time-left">30</span>秒</div>
        </div>
        <div class="holes-container" id="holes-container">
            <!-- 地鼠洞将通过JavaScript生成 -->
        </div>
        <button id="start-btn" class="start-btn">开始游戏</button>
        <div id="time-up" class="time-up">时间到！</div>
    </div>

    <script>
        const holes = 6;
        const holesContainer = document.getElementById('holes-container');
        const scoreBoard = document.getElementById('score');
        const timeLeftBoard = document.getElementById('time-left');
        const startBtn = document.getElementById('start-btn');
        const timeUpBoard = document.getElementById('time-up');
        
        let lastHole;
        let timeUp = false;
        let score = 0;
        let timeLeft = 30;
        let timerId;
        
        // 创建地鼠洞
        for (let i = 0; i < holes; i++) {
            const hole = document.createElement('div');
            hole.className = 'hole';
            
            const mole = document.createElement('div');
            mole.className = 'mole';
            
            hole.appendChild(mole);
            holesContainer.appendChild(hole);
            
            // 点击事件
            mole.addEventListener('click', () => {
                if (!mole.classList.contains('up') || timeUp) return;
                
                score++;
                scoreBoard.textContent = score;
                mole.classList.remove('up');
            });
        }
        
        // 随机出现地鼠
        function randomTime(min, max) {
            return Math.round(Math.random() * (max - min) + min);
        }
        
        function randomHole(holes) {
            const idx = Math.floor(Math.random() * holes);
            const hole = holesContainer.children[idx];
            
            if (hole === lastHole) {
                return randomHole(holes);
            }
            
            lastHole = hole;
            return hole;
        }
        
        function peep() {
            if (timeUp) return;
            
            const time = randomTime(500, 1500);
            const hole = randomHole(holes);
            const mole = hole.querySelector('.mole');
            
            mole.classList.add('up');
            
            setTimeout(() => {
                mole.classList.remove('up');
                if (!timeUp) peep();
            }, time);
        }
        
        // 开始游戏
        function startGame() {
            scoreBoard.textContent = 0;
            timeLeftBoard.textContent = 30;
            timeUp = false;
            timeUpBoard.style.display = 'none';
            startBtn.disabled = true;
            
            score = 0;
            timeLeft = 30;
            
            peep();
            
            timerId = setInterval(() => {
                timeLeft--;
                timeLeftBoard.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    timeUp = true;
                    startBtn.disabled = false;
                    timeUpBoard.style.display = 'block';
                }
            }, 1000);
        }
        
        startBtn.addEventListener('click', startGame);
    </script>
</body>
</html>